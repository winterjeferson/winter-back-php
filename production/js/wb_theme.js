"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var WbDebug=function(){function e(){_classCallCheck(this,e),this.isWbAdmin=!0,this.isWbAdmin=!0,this.isWbAdminBlog=!0,this.isWbLogin=!0,this.isWbManagement=!0,this.isWbTranslation=!0,this.isWbUrl=!0}return _createClass(e,[{key:"debugMethod",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="",a=e.constructor.name;if(!this["is"+a])return!1;i+="%c",i+="obj"+a,i+=".",i+="%c",i+=t,i+="(",i+="%c",""!==o&&(i+=o),i+="%c",i+=");",console.log(i,"color: black","color: green","color: red","color: green")}},{key:"getMethodName",value:function(){if(window.navigator.userAgent.indexOf(".NET ")>0)return!1;var e=new Error("dummy").stack.split("\n")[2].replace(/^\s+at\s+(.+?)\s.+/g,"$1"),t=e.split(".");return"new"!==e?t[1]:"constructor"}}]),e}(),WbAdmin=function(){function e(){_classCallCheck(this,e),objWbDebug.debugMethod(this,"constructor"),this.pageCurrent=""}return _createClass(e,[{key:"build",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin")&&(this.updateVariable(),this.buildMenuDifeneActive(),this.builTableTdWrapper())}},{key:"updateVariable",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.$page=document.querySelector("#page_admin"),document.contains(this.$page)&&(this.$btBlog=this.$page.querySelector('[data-id="btBlog"]'),this.$btLogout=this.$page.querySelector('[data-id="btLogout"]'))}},{key:"buildMenuChangePage",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.buildMenuDifeneActive(e),"admin-logout"!==e&&(window.location.href=e+"/")}},{key:"buildMenuDifeneActive",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=window.location.href.split("/"),t=e[e.length-2],o=document.querySelector('#page_admin_menu [data-id="'+t+'"]');null!==o&&o.parentNode.classList.add("menu-tab-active")}},{key:"buildLogout",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=new XMLHttpRequest;e.open("POST",objWbUrl.getController(),!0),e.send("&c=WbLogin&m=doLogout")}},{key:"builTableTdWrapper",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=document.querySelectorAll(".td-wrapper");Array.prototype.forEach.call(e,function(e){e.onclick=function(){e.classList.contains("td-wrapper-auto")?e.classList.remove("td-wrapper-auto"):e.classList.add("td-wrapper-auto")}})}}]),e}(),WbAdminBlog=function(){function e(){_classCallCheck(this,e),objWbDebug.debugMethod(this,"constructor")}return _createClass(e,[{key:"build",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin-blog")&&(this.updateVariable(),this.buildMenu(),this.buildMenuTable(),this.watchTitle())}},{key:"updateVariable",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.isEdit=!1,this.editId=0,this.$page=document.querySelector("#pageAdminBlog"),this.$formRegister=this.$page.querySelector('[data-id="formRegister"]'),this.$formFieldTitlePt=this.$page.querySelector('[data-id="fieldTitlePt"]'),this.$formFieldTitleEn=this.$page.querySelector('[data-id="fieldTitleEn"]'),this.$formFieldUrlPt=this.$page.querySelector('[data-id="fieldUrlPt"]'),this.$formFieldUrlEn=this.$page.querySelector('[data-id="fieldUrlEn"]'),this.$formFieldContentPt=this.$page.querySelector('[data-id="fieldContentPt"]'),this.$formFieldContentEn=this.$page.querySelector('[data-id="fieldContentEn"]'),this.$formFieldTagPt=this.$page.querySelector('[data-id="fieldTagPt"]'),this.$formFieldTagEn=this.$page.querySelector('[data-id="fieldTagEn"]'),this.$formFieldDatePostPt=this.$page.querySelector('[data-id="fieldDatePostPt"]'),this.$formFieldDatePostEn=this.$page.querySelector('[data-id="fieldDatePostEn"]'),this.$formFieldDateEditPt=this.$page.querySelector('[data-id="fieldDateEditPt"]'),this.$formFieldDateEditEn=this.$page.querySelector('[data-id="fieldDateEditEn"]'),this.$formFieldTagEn=this.$page.querySelector('[data-id="fieldTagEn"]')}},{key:"buildMenu",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this;this.$page.querySelector('[data-id="btRegister"]').onclick=function(){e.isEdit?e.editSave():e.registerContent()}}},{key:"buildMenuTable",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this,t=this.$page.querySelectorAll(".table"),o=this.$page.querySelectorAll('[data-id="tableActive"]'),i=this.$page.querySelectorAll('[data-id="tableInactive"]');Array.prototype.forEach.call(o,function(e){var t=e.querySelectorAll('[data-action="inactivate"]');Array.prototype.forEach.call(t,function(e){e.onclick=function(){objWfModal.buildModal("confirmation","Deseja realmente desativar este conteúdo?"),objWfModal.buildContentConfirmationAction("objWbAdminBlog.modify("+e.getAttribute("data-id")+', "inactivate")')}})}),Array.prototype.forEach.call(i,function(t){var o=t.querySelectorAll('[data-action="activate"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.modify(t.getAttribute("data-id"),"activate")}})}),Array.prototype.forEach.call(i,function(t){var o=t.querySelectorAll('[data-action="activate"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.modify(t.getAttribute("data-id"),"activate")}})}),Array.prototype.forEach.call(t,function(t){var o=t.querySelectorAll('[data-action="edit"]'),i=t.querySelectorAll('[data-action="delete"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.editId=t.getAttribute("data-id"),e.editLoadData(e.editId)}}),Array.prototype.forEach.call(i,function(e){e.onclick=function(){objWfModal.buildModal("confirmation","Deseja realmente desativar este conteúdo?"),objWfModal.buildContentConfirmationAction("objWbAdminBlog.delete("+e.getAttribute("data-id")+")")}})})}},{key:"editSave",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this,t=new XMLHttpRequest,o=objWbUrl.getController(),i="&c=WbAdminBlog&m=doUpdate&titlePt="+this.$formFieldTitlePt.value+"&titleEn="+this.$formFieldTitleEn.value+"&urlPt="+this.$formFieldUrlPt.value+"&urlEn="+this.$formFieldUrlEn.value+"&contentPt="+this.$formFieldContentPt.value+"&contentEn="+this.$formFieldContentEn.value+"&tagPt="+this.$formFieldTagPt.value+"&tagEn="+this.$formFieldTagEn.value+"&datePostPt="+this.$formFieldDatePostPt.value+"&datePostEn="+this.$formFieldDatePostEn.value+"&dateEditPt="+this.$formFieldDateEditPt.value+"&dateEditEn="+this.$formFieldDateEditEn.value+"&id="+e.editId;this.validateForm()&&(t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&e.showResponse(t.responseText)},t.send(i))}},{key:"editLoadData",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var t=this,o=new XMLHttpRequest,i=objWbUrl.getController(),a="&c=WbAdminBlog&m=editLoadData&id="+e;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=JSON.parse(o.responseText);document.documentElement.scrollTop=0,t.isEdit=!0,t.editFillField(e)}},o.send(a)}},{key:"editFillField",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.$formFieldTitlePt.value=e.title_pt,this.$formFieldTitleEn.value=e.title_en,this.$formFieldUrlPt.value=e.url_pt,this.$formFieldUrlEn.value=e.url_en,this.$formFieldContentPt.value=e.content_pt,this.$formFieldContentEn.value=e.content_en,this.$formFieldTagPt.value=e.tag_pt,this.$formFieldTagEn.value=e.tag_en,this.$formFieldDatePostPt.value=e.date_post_pt.substring(0,10),this.$formFieldDatePostEn.value=e.date_post_en.substring(0,10),this.$formFieldDateEditPt.value=e.date_edit_pt.substring(0,10),this.$formFieldDateEditEn.value=e.date_edit_en.substring(0,10),this.editId=e.id,this.$formFieldTagEn.value=e.tag_en}},{key:"modify",value:function(e,t){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var o=this,i=new XMLHttpRequest,a=objWbUrl.getController(),n="&c=WbAdminBlog&m=doModify&status="+t+"&id="+e;i.open("POST",a,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&o.showResponse(i.responseText)},i.send(n)}},{key:"delete",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var t=this,o=new XMLHttpRequest,i=objWbUrl.getController(),a="&c=WbAdminBlog&m=doDelete&id="+e;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&t.showResponse(o.responseText)},o.send(a)}},{key:"validateForm",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=[this.$formFieldTitlePt,this.$formFieldTitleEn,this.$formFieldUrlPt,this.$formFieldUrlEn,this.$formFieldContentPt,this.$formFieldContentEn];return objWfForm.validateEmpty(e)}},{key:"registerContent",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this;if(this.validateForm()){var t=new XMLHttpRequest,o=objWbUrl.getController(),i="&c=WbAdminBlog&m=doRegister&titlePt="+this.$formFieldTitlePt.value+"&titleEn="+this.$formFieldTitleEn.value+"&urlPt="+this.$formFieldUrlPt.value+"&urlEn="+this.$formFieldUrlEn.value+"&contentPt="+this.$formFieldContentPt.value+"&contentEn="+this.$formFieldContentEn.value+"&datePostPt="+this.$formFieldDatePostPt.value+"&datePostEn="+this.$formFieldDatePostEn.value+"&dateEditPt="+this.$formFieldDateEditPt.value+"&dateEditEn="+this.$formFieldDateEditEn.value+"&tagPt="+this.$formFieldTagPt.value+"&tagEn="+this.$formFieldTagEn.value;t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&e.showResponse(t.responseText)},t.send(i)}}},{key:"showResponse",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var t="",o="";switch(e){case"1":location.reload();break;default:t="red",o="Acorreu um erro. Contate o administrador."}objWfNotification.add(o,t)}},{key:"watchTitle",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this;this.$formFieldTitlePt.addEventListener("focusout",function(){var t=objWbUrl.buildSEO(e.$formFieldTitlePt.value);e.$formFieldUrlPt.value=t}),this.$formFieldTitleEn.addEventListener("focusout",function(){var t=objWbUrl.buildSEO(e.$formFieldTitleEn.value);e.$formFieldUrlEn.value=t})}}]),e}(),WbBlog=function(){function e(){_classCallCheck(this,e),objWbDebug.debugMethod(this,"constructor"),this.classlaodMore="loadMore"}return _createClass(e,[{key:"build",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("blog")&&(this.update(),this.buildMenu())}},{key:"update",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.page="pageBlog",this.$lastPost=document.querySelector("#"+this.page+"LastPost"),this.$mostViewed=document.querySelector("#"+this.page+"MostViewed")}},{key:"buildMenu",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this;this.$lastPost&&(document.contains(this.$lastPost.querySelector('[data-id="'+this.classlaodMore+'"]'))&&this.$lastPost.querySelector('[data-id="'+this.classlaodMore+'"]').addEventListener("click",function(t){e.loadMore(this)}),document.contains(this.$mostViewed.querySelector('[data-id="'+this.classlaodMore+'"]'))&&this.$mostViewed.querySelector('[data-id="'+this.classlaodMore+'"]').addEventListener("click",function(t){e.loadMore(this)}))}},{key:"loadMore",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var t=this,o=e.parentNode.parentNode.parentNode.getAttribute("id"),i=o.substring(this.page.length),a=new XMLHttpRequest,n=objWbUrl.getController(),l="&c=WbBlogList&m=buildLoadMoreButtonClick&target="+i;e.classList.add("disabled"),a.open("POST",n,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(e.classList.remove("disabled"),t.loadMoreSuccess(o,a.responseText))},a.send(l)}},{key:"loadMoreSuccess",value:function(e,t){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var o=JSON.parse(t),i=document.querySelector("#"+e),a=i.querySelector(".blog-list"),n=i.querySelector('[data-id="'+this.classlaodMore+'"]');o[this.classlaodMore]||n.classList.add("disabled"),a.insertAdjacentHTML("beforeend",o.html)}}]),e}(),WbLogin=function(){function e(){_classCallCheck(this,e),objWbDebug.debugMethod(this,"constructor")}return _createClass(e,[{key:"build",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin-login")&&(this.update(),this.buildMenu())}},{key:"update",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.isSignUp=!1,this.$page=document.querySelector("#pageAdminLogin"),this.$buttonLogin=document.querySelector("#pageAdminLoginBt"),this.$fielEmail=document.querySelector("#pageAdminLoginUser"),this.$fieldPassword=document.querySelector("#pageAdminLoginPassword")}},{key:"buildMenu",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this;this.$buttonLogin.addEventListener("click",function(t){e.buildLogin()})}},{key:"validate",value:function(){return objWbDebug.debugMethod(this,objWbDebug.getMethodName()),""===this.$fielEmail.value?(this.$fielEmail.focus(),void this.buildLoginResponse("empty_email")):""!==this.$fieldPassword.value||(this.$fieldPassword.focus(),void this.buildLoginResponse("empty_password"))}},{key:"buildLogin",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this,t=new XMLHttpRequest,o=objWbUrl.getController(),i="&c=WbLogin&m=doLogin&email="+this.$fielEmail.value+"&password="+this.$fieldPassword.value;this.validate()&&(this.$buttonLogin.setAttribute("disabled","disabled"),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(e.$buttonLogin.removeAttribute("disabled"),e.buildLoginResponse(t.responseText))},t.send(i))}},{key:"buildLoginResponse",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var t="",o=this.$page.querySelector(".form");switch(e){case"inactive":t=globalTranslation.login_inactive;break;case"problem":t=globalTranslation.login_fail,this.$fielEmail.focus();break;case"empty_email":t=globalTranslation.empty_field,this.$fielEmail.focus();break;case"empty_password":t=globalTranslation.empty_field,this.$fieldPassword.focus();break;default:objWbUrl.build("admin")}objWfNotification.add(t,"red",o)}}]),e}(),WbManagement=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"verifyLoad",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this;window.onload=function(){e.applyClass()}}},{key:"applyClass",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),objWbTranslation.build(),objWbLogin.build(),objWbAdmin.build(),objWbAdminBlog.build(),objWbBlog.build()}}]),e}(),WbTranslation=function(){function e(){_classCallCheck(this,e),objWbDebug.debugMethod(this,"constructor")}return _createClass(e,[{key:"build",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.update(),this.defineActive(),this.buildMenu()}},{key:"buildMenu",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var e=this;this.$select.addEventListener("change",function(t){e.change(this.value)})}},{key:"change",value:function(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());var t=new XMLHttpRequest,o=objWbUrl.getController(),i="&c=WbTranslation&m=change&language="+e;t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&location.reload()},t.send(i)}},{key:"defineActive",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.$select.value=globalLanguage}},{key:"update",value:function(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.$select=document.querySelector("#translationSelect")}}]),e}(),WbUrl=function(){function e(){_classCallCheck(this,e),objWbDebug.debugMethod(this,"constructor")}return _createClass(e,[{key:"buildSEO",value:function(e){return objWbDebug.debugMethod(this,objWbDebug.getMethodName()),e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").toLowerCase().replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")}},{key:"build",value:function(e){return objWbDebug.debugMethod(this,objWbDebug.getMethodName()),window.location=globalUrl+globalLanguage+"/"+e+"/"}},{key:"getController",value:function(){return objWbDebug.debugMethod(this,objWbDebug.getMethodName()),globalUrl+"php/controller.php"}}]),e}(),objWbDebug=new WbDebug,objWbAdmin=new WbAdmin,objWbAdminBlog=new WbAdminBlog,objWbBlog=new WbBlog,objWbLogin=new WbLogin,objWbManagement=new WbManagement,objWbTranslation=new WbTranslation,objWbUrl=new WbUrl;objWbManagement.verifyLoad();
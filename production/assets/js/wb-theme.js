class WbBlog{constructor(){this.classlaodMore="loadMore"}build(){getUrlWord("blog")&&(this.update(),this.buildMenu())}update(){this.page="pageBlog",this.$lastPost=document.querySelector("#"+this.page+"LastPost"),this.$mostViewed=document.querySelector("#"+this.page+"MostViewed")}buildMenu(){let e=this;this.$lastPost&&(document.contains(this.$lastPost.querySelector('[data-id="'+this.classlaodMore+'"]'))&&this.$lastPost.querySelector('[data-id="'+this.classlaodMore+'"]').addEventListener("click",function(t){e.loadMore(this)}),document.contains(this.$mostViewed.querySelector('[data-id="'+this.classlaodMore+'"]'))&&this.$mostViewed.querySelector('[data-id="'+this.classlaodMore+'"]').addEventListener("click",function(t){e.loadMore(this)}))}loadMore(e){let t=this,o=e.parentNode.parentNode.parentNode.getAttribute("id"),a=o.substring(this.page.length),s=new XMLHttpRequest,l=objWbUrl.getController({folder:"blog",file:"LoadMore"}),i="&target="+a;e.classList.add("disabled"),s.open("POST",l,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&(e.classList.remove("disabled"),t.loadMoreSuccess(o,s.responseText))},s.send(i)}loadMoreSuccess(e,t){let o=JSON.parse(t),a=document.querySelector("#"+e),s=a.querySelector(".blog-list"),l=a.querySelector('[data-id="'+this.classlaodMore+'"]');o[this.classlaodMore]||l.classList.add("disabled"),s.insertAdjacentHTML("beforeend",o.html),window.scrollTo(0,document.documentElement.scrollTop+1),window.scrollTo(0,document.documentElement.scrollTop-1)}}class WbForm{constructor(){}build(){getUrlWord("form")&&(this.update(),this.buildMenu())}update(){this.$page=document.querySelector("#pageForm"),this.$form=this.$page.querySelector(".form"),this.$btSend=this.$page.querySelector("#pageFormBtSend")}buildMenu(){let e=this;this.$btSend.addEventListener("click",function(t){e.send()})}send(){let e=this,t=new XMLHttpRequest,o=objWbUrl.getController({folder:"form",file:"FormSend"}),a="&method=sendForm&data="+JSON.stringify(e.getData());this.$btSend.setAttribute("disabled","disabled"),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(e.$btSend.removeAttribute("disabled"),e.response(t.responseText))},t.send(a)}getData(){let e=[];return e.push(this.$form.querySelector('[data-id="email"]').value),e.push(this.$form.querySelector('[data-id="message"]').value),e}response(e){let t="",o="";switch(e){case"ok":o="green",t=globalTranslation.formSent;break;default:o="red",t=globalTranslation.formProblemSend}objWfNotification.add(t,o,this.$form)}}class WbLogin{constructor(){}build(){getUrlWord("login")&&(this.update(),this.buildMenu())}update(){this.isSignUp=!1,this.$page=document.querySelector("#pageAdminLogin"),this.$buttonLogin=document.querySelector("#pageAdminLoginBt"),this.$fielEmail=document.querySelector("#pageAdminLoginUser"),this.$fieldPassword=document.querySelector("#pageAdminLoginPassword")}buildMenu(){let e=this;this.$buttonLogin.addEventListener("click",function(t){e.buildLogin()})}validate(){return""===this.$fielEmail.value?(this.$fielEmail.focus(),void this.buildLoginResponse("empty_email")):""!==this.$fieldPassword.value||(this.$fieldPassword.focus(),void this.buildLoginResponse("empty_password"))}buildLogin(){let e=this,t=new XMLHttpRequest,o=objWbUrl.getController({folder:"admin",file:"LoginData"}),a="&email="+this.$fielEmail.value+"&password="+this.$fieldPassword.value;this.validate()&&(this.$buttonLogin.setAttribute("disabled","disabled"),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(e.$buttonLogin.removeAttribute("disabled"),e.buildLoginResponse(t.responseText))},t.send(a))}buildLoginResponse(e){let t="",o=this.$page.querySelector(".form");switch(e){case"inactive":t=globalTranslation.loginInactive;break;case"problem":t=globalTranslation.loginFail,this.$fielEmail.focus();break;case"empty_email":t=globalTranslation.emptyField,this.$fielEmail.focus();break;case"empty_password":t=globalTranslation.emptyField,this.$fieldPassword.focus();break;default:objWbUrl.build("admin")}objWfNotification.add(t,"red",o)}}class WbManagement{verifyLoad(){window.addEventListener("load",this.applyClass(),{once:!0})}applyClass(){objWbTranslation.build(),objWbBlog.build(),objWbForm.build()}}class WbTranslation{constructor(){}build(){this.update(),this.defineActive(),this.buildMenu()}buildMenu(){let e=this;this.$select.addEventListener("change",function(t){e.change(this.value)})}change(e){let t=new XMLHttpRequest,o=objWbUrl.getController({folder:"theme",file:"Translation"}),a="&language="+e;t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&location.reload()},t.send(a)}defineActive(){this.$select.value=globalLanguage}update(){this.$select=document.querySelector("#translationSelect")}}class WbUrl{constructor(){}buildSEO(e){return e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").toLowerCase().replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")}build(e){window.location=globalUrl+globalLanguage+"/"+e+"/"}getController(e){return"./application/controller/"+e.folder+"/"+e.file+".php"}}var objWbBlog=new WbBlog,objWbForm=new WbForm,objWbManagement=new WbManagement,objWbTranslation=new WbTranslation,objWbUrl=new WbUrl;objWbManagement.verifyLoad();
class WbBlog{constructor(){this.classlaodMore="loadMore"}build(){getUrlWord("blog")&&(this.update(),this.buildMenu())}update(){this.page="pageBlog",this.$lastPost=document.querySelector("#"+this.page+"LastPost"),this.$mostViewed=document.querySelector("#"+this.page+"MostViewed")}buildMenu(){let e=this;this.$lastPost&&(document.contains(this.$lastPost.querySelector('[data-id="'+this.classlaodMore+'"]'))&&this.$lastPost.querySelector('[data-id="'+this.classlaodMore+'"]').addEventListener("click",function(t){e.loadMore(this)}),document.contains(this.$mostViewed.querySelector('[data-id="'+this.classlaodMore+'"]'))&&this.$mostViewed.querySelector('[data-id="'+this.classlaodMore+'"]').addEventListener("click",function(t){e.loadMore(this)}))}loadMore(e){let t=this,o=e.parentNode.parentNode.parentNode.getAttribute("id"),s=o.substring(this.page.length),a=new XMLHttpRequest,i=objWbUrl.getController(),l="&c=WbBlogList&m=buildLoadMoreButtonClick&target="+s;e.classList.add("disabled"),a.open("POST",i,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(e.classList.remove("disabled"),t.loadMoreSuccess(o,a.responseText))},a.send(l)}loadMoreSuccess(e,t){let o=JSON.parse(t),s=document.querySelector("#"+e),a=s.querySelector(".blog-list"),i=s.querySelector('[data-id="'+this.classlaodMore+'"]');o[this.classlaodMore]||i.classList.add("disabled"),a.insertAdjacentHTML("beforeend",o.html),window.scrollTo(0,document.documentElement.scrollTop+1),window.scrollTo(0,document.documentElement.scrollTop-1)}}class WbForm{constructor(){}build(){getUrlWord("form")&&(this.update(),this.buildMenu())}update(){this.$page=document.querySelector("#pageForm"),this.$form=this.$page.querySelector(".form"),this.$btSend=this.$page.querySelector("#pageFormBtSend")}buildMenu(){let e=this;this.$btSend.addEventListener("click",function(t){e.send()})}send(){let e=this,t=new XMLHttpRequest,o=objWbUrl.getController(),s="&c=WbForm&m=sendForm&d="+JSON.stringify(e.getData());this.$btSend.setAttribute("disabled","disabled"),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(e.$btSend.removeAttribute("disabled"),e.response(t.responseText))},t.send(s)}getData(){let e=[];return e.push(["text","text content"]),e.push(["textarea","textarea content"]),e}response(e){let t="",o="";switch(e){case"ok":o="green",t=globalTranslation.formSent;break;default:o="red",t=globalTranslation.formProblemSend}objWfNotification.add(t,o,this.$form)}}class WbLogin{constructor(){}build(){getUrlWord("admin-login")&&(this.update(),this.buildMenu())}update(){this.isSignUp=!1,this.$page=document.querySelector("#pageAdminLogin"),this.$buttonLogin=document.querySelector("#pageAdminLoginBt"),this.$fielEmail=document.querySelector("#pageAdminLoginUser"),this.$fieldPassword=document.querySelector("#pageAdminLoginPassword")}buildMenu(){let e=this;this.$buttonLogin.addEventListener("click",function(t){e.buildLogin()})}validate(){return""===this.$fielEmail.value?(this.$fielEmail.focus(),void this.buildLoginResponse("empty_email")):""!==this.$fieldPassword.value||(this.$fieldPassword.focus(),void this.buildLoginResponse("empty_password"))}buildLogin(){let e=this,t=new XMLHttpRequest,o=objWbUrl.getController(),s="&c=WbLogin&m=doLogin&email="+this.$fielEmail.value+"&password="+this.$fieldPassword.value;this.validate()&&(this.$buttonLogin.setAttribute("disabled","disabled"),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(e.$buttonLogin.removeAttribute("disabled"),e.buildLoginResponse(t.responseText))},t.send(s))}buildLoginResponse(e){let t="",o=this.$page.querySelector(".form");switch(e){case"inactive":t=globalTranslation.login_inactive;break;case"problem":t=globalTranslation.login_fail,this.$fielEmail.focus();break;case"empty_email":t=globalTranslation.empty_field,this.$fielEmail.focus();break;case"empty_password":t=globalTranslation.empty_field,this.$fieldPassword.focus();break;default:objWbUrl.build("admin")}objWfNotification.add(t,"red",o)}}class WbManagement{verifyLoad(){window.addEventListener("load",this.applyClass(),{once:!0})}applyClass(){objWbTranslation.build(),objWbBlog.build(),objWbForm.build()}}class WbTranslation{constructor(){}build(){this.update(),this.defineActive(),this.buildMenu()}buildMenu(){let e=this;this.$select.addEventListener("change",function(t){e.change(this.value)})}change(e){let t=new XMLHttpRequest,o=objWbUrl.getController(),s="&c=WbTranslation&m=change&language="+e;t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&location.reload()},t.send(s)}defineActive(){this.$select.value=globalLanguage}update(){this.$select=document.querySelector("#translationSelect")}}class WbUrl{constructor(){}buildSEO(e){return e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").toLowerCase().replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")}build(e){return window.location=globalUrl+globalLanguage+"/"+e+"/"}getController(){return globalUrl+"assets/php/controller.php"}}var objWbBlog=new WbBlog,objWbForm=new WbForm,objWbManagement=new WbManagement,objWbTranslation=new WbTranslation,objWbUrl=new WbUrl;objWbManagement.verifyLoad();